<!DOCTYPE html>
<html lang="no">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Innhold | eFORSK</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Innhold" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="eFORSK" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Innhold" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","headline":"Innhold","name":"eFORSK","url":"http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=bacc66b9ba4c752f3179f20d5cfd6ae4b9f4ef74">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

    
    <!-- Search functionality CSS -->
    <style>
      /* Top navigation bar */
      .top-nav-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 6px;
        margin-bottom: 30px;
        gap: 20px;
      }
      
      .nav-left-section {
        flex-shrink: 0;
      }
      
      .site-title {
        flex-shrink: 0;
      }
      
      .site-title span {
        font-size: 24px;
        font-weight: bold;
        color: white;
        display: inline-flex;
        align-items: center;
      }
      
      .nav-search-container {
        position: relative;
        flex: 1;
        max-width: 650px;
        margin: 0 20px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .nav-search-input {
        flex: 1;
        padding: 10px 16px;
        font-size: 16px;
        border: 2px solid rgba(255, 255, 255, 0.8);
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.95);
        color: #333;
        outline: none;
        transition: all 0.2s;
        box-sizing: border-box;
      }
      
      .nav-search-input:focus {
        background: rgba(255, 255, 255, 1);
        border-color: #155799;
        box-shadow: 0 0 0 3px rgba(21, 87, 153, 0.1);
      }
      
      .nav-search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #ccc;
        border-top: none;
        border-radius: 0 0 12px 12px;
        max-height: 450px;
        overflow-y: auto;
        z-index: 1001;
        display: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        margin-top: 2px;
      }
      
      .nav-search-results.has-results {
        display: block;
      }
      
      .nav-search-results li {
        list-style: none;
        padding: 10px 16px;
        border-bottom: 1px solid #eee;
        font-size: 13px;
        cursor: pointer;
        line-height: 1.4;
      }
      
      .nav-search-results li:hover {
        background: #f5f5f5;
      }
      
      .nav-search-results li:last-child {
        border-bottom: none;
      }
      
      .nav-search-results a {
        text-decoration: none;
        color: #155799;
        display: block;
      }
      
      .nav-search-results a:hover {
        text-decoration: none;
      }
      
      .nav-search-results mark {
        background: #ffe89c;
        padding: 1px 2px;
      }
      
      .nav-actions {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        gap: 10px;
        margin-left: 2px;
      }
      
      .hemit-logo {
        height: 40px;
        width: auto;
      }
      
      .hemit-logo svg {
        height: 100%;
        width: auto;
        opacity: 0.9;
        transition: opacity 0.2s;
      }
      
      .hemit-logo svg:hover {
        opacity: 1;
      }
      
      .nav-button {
        background: rgba(76, 175, 80, 0.9);
        color: white;
        border: 1px solid #4CAF50;
        border-radius: 6px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 14px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        transition: background-color 0.2s;
      }
      
      .nav-button:hover {
        background: rgba(76, 175, 80, 1);
        text-decoration: none;
        color: white;
      }
      
      .nav-icon {
        width: 16px;
        height: 16px;
        fill: currentColor;
      }
      
      /* Page header content */
      .page-header-content {
        text-align: center;
      }
      
      .search-icon {
        width: 16px;
        height: 16px;
        fill: currentColor;
      }
      
      /* Quick search modal */
      .quick-search-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
      }
      
      .quick-search-content {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: white;
        padding: 15px;
        border-radius: 8px;
        width: 85%;
        max-width: 500px;
        max-height: 70vh;
        overflow-y: auto;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        box-sizing: border-box;
      }
      
      .quick-search-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      
      .quick-search-close {
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: #666;
        padding: 0;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .quick-search-input {
        width: calc(100% - 20px);
        padding: 10px;
        font-size: 16px;
        border: 2px solid #ddd;
        border-radius: 4px;
        margin-bottom: 10px;
        outline: none;
      }
      
      .quick-search-results {
        margin: 0;
        padding: 0;
        list-style: none;
        max-height: 50vh;
        overflow-y: auto;
      }
      
      .quick-search-results li {
        margin-bottom: 8px;
        padding: 8px;
        border: 1px solid #eee;
        border-radius: 4px;
        font-size: 14px;
      }
      
      .quick-search-results a {
        text-decoration: none;
        color: #155799;
      }
      
      .quick-search-results a:hover {
        text-decoration: underline;
      }
      
      .quick-search-results mark {
        background: #ffe89c;
        padding: 1px 2px;
      }
      
      @media (max-width: 768px) {
        .top-nav-bar {
          flex-direction: column;
          gap: 15px;
          padding: 15px;
        }
        
        .nav-search-container {
          order: 2;
          margin: 0;
          max-width: 100%;
          width: 100%;
        }
        
        .site-title {
          order: 1;
          text-align: center;
        }
        
        .nav-actions {
          order: 3;
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 15px;
        }
        
        .hemit-logo {
          height: 35px;
        }
        
        .nav-search-input {
          padding: 12px 16px;
          font-size: 16px;
        }
        
        .nav-search-results {
          max-height: 350px;
        }
        
        .nav-search-results li {
          padding: 8px 12px;
          font-size: 12px;
        }
      }
    </style>
  </head>
  <body>
    <a id="skip-to-content" href="#content">Hopp til innhold.</a>

    <header class="page-header" role="banner">
      <!-- Top navigation bar with ePROM title and search -->
      <div class="top-nav-bar">
        <div class="nav-left-section">
          <div class="site-title">
            <span>eFORSK</span>
          </div>
        </div>
        
        <div class="nav-search-container">
          <input id="inline-search-box" type="search" placeholder="Søk i dokumentasjonen…" class="nav-search-input" autocomplete="off" title="Søk i dokumentasjonen" />
          <a href="/" class="nav-button home-button" title="Tilbake til forsiden">
            <svg class="nav-icon" viewBox="0 0 24 24">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            Hjem
          </a>
          <div id="inline-search-results" class="nav-search-results"></div>
          <p id="inline-search-status" class="nav-search-status"></p>
        </div>
        
        <div class="nav-actions">
          <div class="hemit-logo">
            <svg version="1.1" viewBox="0 0 161 80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <style type="text/css">
                .st0{fill:#6CACE4;}
                .st1{fill:#FFFFFF;}
              </style>
              <path class="st0" d="M36.3,11.2c0,4-3.2,7.2-7.2,7.2s-7.2-3.2-7.2-7.2c0-3.9,3.2-7.2,7.2-7.2S36.3,7.2,36.3,11.2z"/>
              <path class="st1" d="M36.3,33c0,3.9-3.2,7.2-7.2,7.2s-7.2-3.2-7.2-7.2c0-4,3.2-7.2,7.2-7.2S36.3,29,36.3,33z"/>
              <path class="st0" d="M14.4,33c0,3.9-3.2,7.2-7.2,7.2c-3.9,0-7.2-3.2-7.2-7.2c0-4,3.2-7.2,7.2-7.2C11.2,25.8,14.4,29,14.4,33z"/>
              <path class="st0" d="M58.1,33c0,3.9-3.2,7.2-7.2,7.2c-4,0-7.2-3.2-7.2-7.2c0-4,3.2-7.2,7.2-7.2C54.9,25.8,58.1,29,58.1,33z"/>
              <path class="st0" d="M36.3,54.8c0,3.9-3.2,7.2-7.2,7.2s-7.2-3.2-7.2-7.2c0-3.9,3.2-7.2,7.2-7.2S36.3,50.9,36.3,54.8z"/>
              <path class="st1" d="M86.7,40.1v-8.3h-9.9v8.3h-3.7V20.8h3.7v7.7h9.9v-7.7h3.7v19.4H86.7z"/>
              <path class="st1" d="M95.7,40.1V20.8h11.8v3.1h-8.1v4.8h6.6v3.1h-6.6V37h8.5v3.1H95.7z"/>
              <path class="st1" d="M128.3,40.1V25.9c-0.1,1-0.1,1.1-0.7,2.8l-4.4,11.4h-3.3l-4-11.2c-0.4-1.1-0.4-1.4-0.7-3.1v14.3h-3.3V20.8h4.4
                l5.2,13.8c0.2,0.6,0.3,0.8,0.4,1.5c0.1-0.9,0.2-1,0.4-1.5l5.4-13.8h4.4v19.4H128.3z"/>
              <path class="st1" d="M137.2,20.8h3.7v19.4h-3.7V20.8z"/>
              <path class="st1" d="M153.2,23.9v16.2h-3.7V23.9h-5.8v-3.1H159v3.1H153.2z"/>
            </svg>
          </div>
        </div>
      </div>
      
      <!-- Page-specific header content -->
      <div class="page-header-content">
        <h1 class="project-name">Innhold</h1>
        <h2 class="project-tagline"></h2>
      </div>
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="velkommen-til-eforsk">Velkommen til eFORSK</h1>

<p>eFORSK er en plattformuavhengig IKT-løsning utviklet for å bistå kliniske forskere i Helse Midt-Norge med å samle inn data fra studiedeltakere på en effektiv og sikker måte. Med støtte for utsending og mottak av elektroniske og fysiske skjemaer i posten, gir eFORSK muligheten til å administrere og overvåke forskningsprosjekter med minimal manuell innsats.</p>

<h1 id="funksjoner-og-fordeler-med-eforsk">Funksjoner og fordeler med eFORSK</h1>

<h3 id="effektiv-datainnsamling">Effektiv datainnsamling</h3>
<p>eFORSK er laget for å gjøre datainnsamling enkel, samtidig som informasjonssikkerhet er ivaretatt. Enten man benytter digitale løsninger gjennom Helsenorge eller Digipost, eller fysiske papirskjema i posten, sikrer eFORSK at informasjonen distribueres effektivt og sikkert i tråd med risikovurdering.</p>

<h3 id="digitale-samtykker">Digitale samtykker</h3>

<p>Med eFORSK kan man enkelt innhente samtykke fra studiedeltakere gjennom digitale samtykkeprosedyrer. Dette forenkler prosessen uten å gå på bekostning av reglement og forskrifter for personvern og etiske prinsipper.</p>

<h3 id="randomisering">Randomisering</h3>

<p>Det er i samarbeid med superbrukere mulig å sette opp randomisering av studiedeltakere i forskningsprosjektene i eFORSK.</p>

<h3 id="monitorering">Monitorering</h3>

<p>eFORSK har mulighet for å aktivere kildedataverifisering (source data verification, SDV) på utvalgte felter i skjema. Det finnes også en egen monitoreringsoversikt for personer med monitorrolle med søke- og filtrerningsmuligheter.</p>

<h3 id="på-vegne-av-funksjonalitet">«På vegne av»-funksjonalitet</h3>

<p>eFORSK har en integrert “på vegne av”-funksjon som gjør det mulig å kommunisere med relasjoner av et forskningsobjekt direkte, noe som forenkler kommunikasjonssløyfa for aktuelle studiedeltakere.</p>

<h1 id="nyheter-i-eforsk">Nyheter i eFORSK</h1>

<p>Innholdet i alle oppgraderinger, funksjonelle såvel som tekniske, oppsummeres suksessivt i <a href="https://eforskbrukermanual.azurewebsites.net/#changelog">Endringsloggen</a>. Forrige funksjonelle oppgradering v11 ble produksjonssatt 19.06.2025 og inneholdt blant annet monitoreringsfunksjonalitet i tråd med GCP-krav i en 1.0-versjon. Nyeste versjon, v11.1, er i hovudsak en teknisk oppgradering og ble produksjonssatt 6. oktober 2025 (se endringslogg for detaljer).</p>

<h1 id="avtale-om-bruk">Avtale om bruk</h1>

<p>Databehandleravtaler (DBA) knyttet til overordnet avtale om IT-tjenester er allerede inngått med alle helseforetak i Helse Midt-Norge samt NTNU. Dermed reduseres nødvendig administrativt arbeid i forkant av datainnsamling, da det avtalemessige allerede er på plass. Det eneste som må fylles ut av hver enkelt forskergruppe før man kan få tilgang til sin egen database i eFORSK er et vedlegg til DBA. I tillegg til å være et juridisk dokument, kan forskere velge oppsett og hvilke funksjonaliteter man ønsker å aktivere i sin database. Vi anbefaler derfor å fylle ut vedlegg til DBA så nøyaktig som mulig.</p>

<p>Alle prosjekter som opprettes i eFORSK må ha hjemmel for datainnsamling fra eksempelvis REK, PVO eller annet.</p>

<h1 id="hvorfor-velge-eforsk">Hvorfor velge eFORSK?</h1>

<p><strong>Brukervennlighet:</strong> Sømløs og brukervennlig brukergrensesnitt med enkel tilgang til data</p>

<p><strong>Plattformuavhengig:</strong> Tilgjengelig på alle enheter og samarbeid mulig på tvers av geografiske avgrensninger i sanntid</p>

<p><strong>Sikkerhet:</strong> Risikovurdert løsning med streng beskyttelse av sensitive data</p>

<p><strong>Kostnadseffektivitet:</strong> Reduserer tid brukt på manuelle prosesser og administrasjon</p>

<p><strong>Skalerbarhet:</strong> Tilpasset både små og store forskningsprosjekter</p>

<p><strong>Digital samtykkehåndtering:</strong> Enkel og digital innsamling av samtykker fra studiedeltakere</p>

<p><strong>Eksport:</strong> Mulighet for eksport av innsamlet studiedata i ulike formater for oppfølgingsstudier eller langtidslagring</p>

<h1 id="brukermanual">Brukermanual</h1>

<p>eFORSK er selvbetjent og enkel i bruk, vi anbefaler likevel å gjøre seg kjent med <a href="https://eforskbrukermanual.azurewebsites.net/">Brukermanualen, som ligger her</a></p>

<h1 id="support-og-brukerstøtte">Support og brukerstøtte</h1>

<p>Forskningsavdelingen ved St Olavs Hospital ivaretar førstelinjesupport for brukere av eFORSK. Ta kontakt på forskningsstotte@stolav.no for å komme i gang eller ved spørsmål om bruk av tjenesten. På <a href="https://www.stolav.no/avdelinger/sentral-stab/fagavdelingen/forskningsavdelingen/datahandtering/#eforsk">nettsiden til Forskningsavdelingen</a> ligger et utvalg brukermanualer som kan være nyttig ved bygging av skjema, eksport av data ved studieslutt, osv.</p>

<h1 id="publisering-av-resultater-oppnådd-ved-bruk-av-eforsk">Publisering av resultater oppnådd ved bruk av eFORSK</h1>

<h3 id="kreditering-ved-publisering">Kreditering ved publisering</h3>
<p>For å sikre korrekt kreditering ved publisering av forskningsresultater oppnådd ved bruk av eFORSK, ber vi om at følgende formulering benyttes i metodekapitlet i publikasjonen:</p>

<p><strong>Norsk versjon:</strong> «Datainnsamling (og randomisering, dersom relevant) ble gjennomført ved hjelp av eFORSK, en web-basert applikasjon utviklet og administrert av Hemit HF.»</p>

<p><strong>Engelsk versjon:</strong> «Data collection (and randomization if relevant) was performed using eFORSK, a web-based application developed and maintained by Central Norway Regional Health Authority’s IT department, Hemit HF.»</p>

<h1 id="finansiering">Finansiering</h1>

<p>eFORSK blir finansiert gjennom tjenestebudsjettet til Helse Midt-Norge og det er derfor ikke behov for finansiering av de enkelte interne forskningsprosjektene som har databaser i eFORSK. Det som imidlertid kan bli kostnadselementer, og som blir fakturert brukere av eFORSK, er distribuering av skjema og brev i papirformat (krever eget oppsett), samt bruk av eSignering (les mer om dette <a href="https://samarbeid.digdir.no/esignering/kostnadsmodell-esignering/103">her</a>). Videre kan det medføre kostnader for prosjektet dersom studiedeltaker som mottar skjema eller brev benytter sikker digital postkasse og ikke er aktiv i Helsenorge (les mer <a href="https://samarbeid.digdir.no/digital-postkasse/kostnadsmodell-digital-postkasse/106">her</a>). På grunn av dette krever vi faktureringsinformasjon ved opprettelse av samtlige nye databaser i eFORSK.</p>

<h1 id="strategi-og-videreutvikling">Strategi og videreutvikling</h1>

<p>eFORSK er en del av Helse Midt-Norges overordnede strategi for IKT-støtte til forskning, og har sammen med andre strategiske tiltak som målsetning å skape en datadrevet kultur som sikrer ressurs- og kostnadseffektive beslutningsgrunnlag for drift og utvikling av helsetjenesten. I tråd med den besluttede strategien, er videreutviklingen av eFORSK sterkt forankret i de behovene og prioriteringene som er definert i IKT-styringsstrukturen i Helse Midt-Norge. Dette innebærer at eFORSK på en smidig måte tilpasses for å møte både forskernes behov for effektive verktøy samt forskningsinstitusjonenes målsetninger. Utviklingsarbeidet har alltid fokus på de strenge kravene til datasikkerhet, personvern og forskningsetikk. Samlet gir dette en helhetlig tilnærming hvor både teknologiske løsninger og forskningskrav blir ivaretatt på en målrettet måte og eFORSK jobbes kontinuerlig med for at det skal være en fremtidsrettet plattform som kan bidra til en mer effektiv og sikker datainnsamling i klinisk forskning.</p>

<p>Alle nye oppdrageringer blir nøye validert, testet og dokumentert før produksjonssetting. Dette gjennomføres av egen testleder i Hemit Systemutvikling, som benytter flere sett med testdata for å validere at den endrede koden fungerer og at arbeidsflyten er i tråd med forventningene. Se gjerne <a href="https://eforskbrukermanual.azurewebsites.net/#changelog">Endringsloggen</a> for detaljer om utvikling.</p>

<h1 id="teknisk-løsning">Teknisk løsning</h1>

<h2 id="overordnet-arkitektur">Overordnet arkitektur</h2>

<p>eFORSK har en overordnet arkitektur basert på medisinsk registreringssystem (MRS), som en trelagsapplikasjon med lignende sikkerhetsmodell (se under). Applikasjonen består av flere databaser; en felles, Common, samt egne databaser tilegnet hvert enkelt forskningsprosjekt, eller register. eFORSK er skrevet i .NET, benytter MS sql-database og driftes på virtuelle miljø hos Norsk Helsenett (NHN).</p>

<h2 id="sikkerhet">Sikkerhet</h2>

<p>eFORSK er risikovurdert og all data i programvaren behandles i henhold til gjeldende regler for personvern og datasikkerhet. Programvaren bruker sikker digital kommunikasjon gjennom plattformer som Helsenorge og Digipost, og kommuniserer med FALK og ePROM, som i likhet med eFORSK er bygget på nasjonal infrastruktur.</p>

<p>eFORSK tilbys som en installasjon i NHN infrastruktur og tilbys helseforetak og universiteter med internett som bærer. Sikkerhetsnivået er tilpasset slik eksponering (all data og kommunikasjon er kryptert og sterk autentisering ved bruk av HelseID). eFORSK er utformet i tråd med kravene som stilles i Norm for informasjonssikkerhet helse- og omsorgstjenesten (Normen) samt tilpasset kravene i GDPR.</p>

<p>Det tas backup av de virtuelle serverne i forkant av større endringer, samt backup av databasene hver natt.</p>

<p>Personvern ivaretas i alle ledd og eFORSK har en robust sikkerhetsmodell egnet for å håndtere sensitive personopplysninger. Sikkerhetsmodellen deles grovt i fire deler:</p>

<h3 id="autentisering-brukertilgang-og-rollestyring">Autentisering, brukertilgang og rollestyring:</h3>
<p>eFORSK baserer seg på claims-basert autentisering der pålogging og tildeling av informasjon om roller og rettigheter er eksternt. Denne informasjonen benyttes til å styre hvilke data brukeren har lov til å se og hvilke operasjoner de ulike har lov til å utføre. Forsøk på å få tilgang til eFORSK uten å være autentisert og autorisert vil avvises og brukeren videresendes til den integrerte løsningen FALK for pålogging. Alle brukertilganger i systemet er personlige.</p>

<p>eFORSK benytter OIDC for autentisering mot FALK og henter identitet og tilgangsinformasjon derifra, hvor brukeren selv velger enhet og rolle før det gis tilgang til eFORSK. Informasjon om brukerens claims videreformidles så til eFORSK. All informasjonen om brukerrettigheter vil følge alle operasjoner brukeren gjennomfører.</p>

<h3 id="tilgangstre">Tilgangstre:</h3>
<p>Et register i eFORSK kan definere sitt eget hierarkisk tilgangstre som styrer hvilke data en pålogget bruker har tilgang til. Dette er en nyttig funksjon for multisenterstudier.</p>

<h3 id="lagdeling">Lagdeling:</h3>
<p>eFORSK har en horisontal og vertikal lagdeling. De horisontale lagene skiller mellom web-laget, som er det brukeren ser, service-laget, som inneholder forretningslogikken og database-laget. Bare web-laget er tilgjengelig for brukerne. De vertikale lagene skiller mellom de ulike registrene, eller forskningsprosjektene, i løsningen. All data for et register lagres i registerets egen database og deles ikke med noen av de andre registrene
Kryptering: Sensitive data som kan brukes for å identifisere en person lagres kryptert i databasen. Hver database, eller register, i systemet har sin egen krypteringsnøkkel som brukes for dette området. Krypteringsalgoritme som benyttes er AES128 med modus ECB.</p>

<h3 id="pseudonymisering">Pseudonymisering:</h3>
<p>I eFORSK kan data samles inn på personer fra folkeregisteret (per i dag Personregisteret, som i løpet av 2025 skal erstattes av Persontjenesten). Personers identitet er aldri direkte tilgjengelig i eFORSKs database. Ved første gangs oppslag i en persons data opprettes et pseudonym for denne i databasen. Personens fødselsnummer lagres kryptert i en database separert fra de andre opplysningene. Det brukes egne krypteringsnøkler for hvert register. Alle andre personopplysninger lastes ned fra Personregisteret ved behov, disse lagres ikke. Unntaket her er når et register skal samle inn informasjon om pasienten (som kjønn, demografi) på sine skjema. Selve skjemadataene lagres kryptert med overnevnte krypteringsnøkkel.</p>

<h2 id="logging">Logging</h2>

<p>Logging skal sørge for komplett sporbarhet over hva som har skjedd i applikasjonen og skal ikke inneholde sensitiv data. Det skilles mellom to typer logging:</p>

<p>Serverlogger benyttes for det meste til å logge kjøring av bakgrunnsjobber og feil i applikasjonen. Logger til windows event-log plukkes opp av SPLUNK.</p>

<p>Datalogger benyttes for å logge brukeraktiviteter mot data i applikasjonen og lagrer til databasen.</p>

<p>Det er automatisk loggføring av innloggingsforsøk og endring i studiedata i systemet i tillegg til Audit Trail av studiedata som lagres i databasens tabeller. For hver slik hendelse registreres tidspunkt, operasjonsnavn og om operasjon var mislykket eller vellykket.</p>

<h2 id="innsyn">Innsyn</h2>

<p>En person skal kunne spørre applikasjonen om den har data om personen, hvilke data, hvem som har behandlet/sett dataene og kunne be om å få seg slettet.</p>

<h2 id="integrasjoner">Integrasjoner</h2>

<h3 id="eprom">ePROM:</h3>
<p>Pasientrapporterte resultater (ePROM) inkluderer spørreskjemaer som vurderer helse og livskvalitet fra pasientens perspektiv. Disse tilbakemeldingene inngår i registre som har til formål å vurdere og forbedre kvaliteten på behandling som gis på norske sykehus. eFORSK sender ut pasientskjema til pasientene via ePROM. ePROM-løsningen distribuerer skjemaene via Helsenorge, digital postkasse eller fysisk brev i posten. Pasientens utfylte skjema returneres til eFORSK for dataanalyse.</p>

<h3 id="personregisteret-skal-erstattes-av-persontjenesten-i-løpet-av-2025">Personregisteret (skal erstattes av Persontjenesten i løpet av 2025):</h3>
<p>Personregisteret er et API for søk etter personer i folkeregisteret. Personregisteret støtter søk etter personnummer og kombinasjoner av navn og hjemkommune.</p>

<p>eFORSK bruker personregisteret som kilde til personinformasjon, dette for å unngå å lagre mer informasjon om pasienten enn nødvendig. eFORSK lagrer kun en kryptert kopi av pasientens personnummer, all annen personinformasjon lastes ned fra personregisteret ved behov.</p>

<p>Personregisteret eksponerer følgende API-er: HL7, WCF og Rest. eFORSK bruker WCF-grensesnittet.</p>

<h1 id="data-i-applikasjonen">Data i applikasjonen</h1>

<p>Forskningsdata som legges inn i systemet registreres med brukernavn og tidspunkt. Alle dataendringer foretatt av brukere er sporbare. Personlige opplysninger om studiedeltagere skal være begrenset til det minimum som er nødvendig for å skille deltagere fra hverandre. Et minimumskrav til identifiseringsinformasjon er unik nøkkel. Studiedeltagerdata for identifikasjon låses med en gang for å unngå ombytting av pasienter.</p>

<p>Randomiseringsresultater er ikke manipulerbare for brukere av systemet uansett studie, men kan omgås ved å opprette skjemaet på nytt (dette logges).</p>

<p>Hvert enkelt prosjekt har sin egen database, men er tilgjengelig gjennom en felles applikasjon. Dette sikrer tilstrekkelig adskillelse av data prosjektene i mellom. Hver database har sin egen krypteringsnøkkel. Prosjektet benytter en GUID (Global Unique Identifier) som en referanse til forskningsobjektet i stedet for fødselsnummer/ID-nummer.</p>

<p>Hemit har ingen eierrettigheter til data som systemet forvalter.</p>



      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/HemitSystemutvikling/eFORSK">eFORSK</a> is maintained by <a href="https://github.com/HemitSystemutvikling">HemitSystemutvikling</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

    <!-- Load search functionality on all pages -->
    <script src="https://cdn.jsdelivr.net/npm/lunr/lunr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.4.0/lunr.stemmer.support.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.4.0/lunr.no.min.js"></script>
    <script>
      window.SEARCH_INDEX_URL = '/assets/search-index.json';
      
      // Inline search functionality
      (function(){
        const input = document.getElementById('inline-search-box');
        const results = document.getElementById('inline-search-results');
        const status = document.getElementById('inline-search-status');
        
        if(!input || !results) return;

        const INDEX_URL = window.SEARCH_INDEX_URL || '/assets/search-index.json';
        let idx = null;
        let docs = [];
        let searchTimeout = null;

        function escapeHtml(str){
          return (str||'').replace(/[&<>"']/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c]));
        }

        function highlight(text, terms){
          if(!terms.length) return escapeHtml(text.slice(0,80));
          const escaped = terms.map(t=>t.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'));
          const re = new RegExp('(' + escaped.join('|') + ')','gi');
          const snippet = text.slice(0,120);
          return escapeHtml(snippet).replace(re,'<mark>$1</mark>') + (text.length > 120 ? '...' : '');
        }

        function buildIndex(json){
          docs = json.docs;
          idx = lunr(function(){
            if(lunr.no){ this.use(lunr.no); }
            this.ref('id');
            this.field('title', { boost: 3 });
            this.field('content');
            
            // Custom tokenizer that preserves version numbers and technical terms
            this.tokenizer.separator = /[\s\-\u2013\u2014]+/;
            
            docs.forEach(d=>this.add(d));
          });
        }

        function ensureIndex(){
          if(idx) return Promise.resolve();
          return fetch(INDEX_URL, { cache:'no-store' })
            .then(r=>r.json())
            .then(j=>{ buildIndex(j); })
            .catch(e=>{ console.error(e); });
        }

        function render(res, terms){
          results.innerHTML='';
          
          // For version searches, filter out false positives and add direct content search
          if (terms.some(t => /^v?\d+(\.\d+)*$/i.test(t))) {
            const versionTerms = terms.filter(t => /^v?\d+(\.\d+)*$/i.test(t));
            
            // Direct content search for exact version matches
            const directMatches = docs.filter(doc => {
              return versionTerms.some(version => {
                const cleanVersion = version.replace(/^v/i, '');
                const versionPattern = new RegExp(`\\bv${cleanVersion}\\b`, 'i');
                const numberPattern = new RegExp(`\\b${cleanVersion}\\b`, 'i');
                
                return versionPattern.test(doc.content) || 
                       versionPattern.test(doc.title) ||
                       numberPattern.test(doc.content) || 
                       numberPattern.test(doc.title);
              });
            });
            
            // Convert direct matches to result format and merge with existing results
            const directResults = directMatches.map(doc => ({ ref: doc.id, score: 2 }));
            
            // Combine and deduplicate results, prioritizing direct matches
            const allResults = new Map();
            
            // Add direct matches first (higher priority)
            directResults.forEach(result => {
              allResults.set(result.ref, result);
            });
            
            // Add indexed search results if they don't conflict
            res.forEach(result => {
              if (!allResults.has(result.ref)) {
                allResults.set(result.ref, result);
              }
            });
            
            res = Array.from(allResults.values()).sort((a, b) => b.score - a.score);
          }
          
          if(!res.length){ 
            results.classList.remove('has-results');
            return; 
          }
          
          results.classList.add('has-results');
          const frag = document.createDocumentFragment();
          res.slice(0,10).forEach(hit=>{
            const d = docs.find(dd=>dd.id===hit.ref);
            if(!d) return;
            const li = document.createElement('li');
            li.innerHTML = '<a href="'+d.url+'"><strong>'+escapeHtml(d.title)+'</strong><br><small style="color:#666;">'+highlight(d.content, terms)+'</small></a>';
            frag.appendChild(li);
          });
          results.appendChild(frag);
        }

        function onInput(){
          const q = input.value.trim();
          
          if(searchTimeout) {
            clearTimeout(searchTimeout);
          }
          
          if(!q){ 
            results.innerHTML=''; 
            results.classList.remove('has-results');
            return; 
          }
          
          searchTimeout = setTimeout(() => {
            ensureIndex().then(()=>{
              const terms = q.split(/\s+/).filter(Boolean);
              let res = [];
              try { 
                // Try multiple search strategies for better results
                let searchQueries = [];
                
                // 1. Exact phrase search
                searchQueries.push(terms.join(' '));
                
                // 2. Individual terms with wildcards
                searchQueries.push(terms.map(t=>t+'*').join(' '));
                
                // 3. OR search with wildcards for broader results
                if (terms.length > 1) {
                  searchQueries.push(terms.map(t=>t+'*').join(' OR '));
                }
                
                // 4. Special handling for version numbers (e.g., v13.3, v2.6)
                const versionTerms = terms.filter(t => /^v?\d+(\.\d+)*$/i.test(t));
                if (versionTerms.length > 0) {
                  versionTerms.forEach(version => {
                    // Search for version with and without 'v' prefix
                    const cleanVersion = version.replace(/^v/i, '');
                    
                    // Exact version searches first
                    searchQueries.push(`+v${cleanVersion}`); // + means required
                    searchQueries.push(`+${cleanVersion}`);
                    
                    // Field-specific searches to avoid false matches
                    searchQueries.push(`title:v${cleanVersion}`);
                    searchQueries.push(`title:${cleanVersion}`);
                  });
                }
                
                // Execute searches and combine results
                let allResults = new Map();
                for (let query of searchQueries) {
                  try {
                    let queryResults = idx.search(query);
                    queryResults.forEach(result => {
                      if (!allResults.has(result.ref) || allResults.get(result.ref).score < result.score) {
                        allResults.set(result.ref, result);
                      }
                    });
                  } catch(err) { 
                    console.warn('Search query failed:', query, err); 
                  }
                }
                
                // Convert back to array and sort by score
                res = Array.from(allResults.values()).sort((a, b) => b.score - a.score);
                
              } catch(err){ 
                console.error('Search error:', err); 
              }
              render(res, terms);
            });
          }, 300); // Debounce search for 300ms
        }

        // Event listeners
        input.addEventListener('input', onInput);

        // Hide results when clicking outside
        document.addEventListener('click', function(e) {
          if (!input.contains(e.target) && !results.contains(e.target)) {
            results.classList.remove('has-results');
          }
        });

        // Show results again when focusing input if there's content
        input.addEventListener('focus', function() {
          if (input.value.trim() && results.innerHTML) {
            results.classList.add('has-results');
          }
        });

        // Hide results when clicking on a link
        results.addEventListener('click', function(e) {
          if (e.target.tagName === 'A') {
            results.classList.remove('has-results');
          }
        });
      })();
    </script>
  </body>
</html>